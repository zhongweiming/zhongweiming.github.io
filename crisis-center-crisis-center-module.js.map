{"version":3,"sources":["webpack:///./src/app/crisis-center/crisis-center-home/crisis-center-home.component.html","webpack:///./src/app/crisis-center/crisis-center/crisis-center.component.html","webpack:///./src/app/crisis-center/crisis-detail/crisis-detail.component.html","webpack:///./src/app/crisis-center/crisis-list/crisis-list.component.html","webpack:///./src/app/can-deactivate.guard.ts","webpack:///./src/app/crisis-center/crisis-center-home/crisis-center-home.component.css","webpack:///./src/app/crisis-center/crisis-center-home/crisis-center-home.component.ts","webpack:///./src/app/crisis-center/crisis-center-routing.module.ts","webpack:///./src/app/crisis-center/crisis-center.module.ts","webpack:///./src/app/crisis-center/crisis-center/crisis-center.component.css","webpack:///./src/app/crisis-center/crisis-center/crisis-center.component.ts","webpack:///./src/app/crisis-center/crisis-detail-resolver.service.ts","webpack:///./src/app/crisis-center/crisis-detail/crisis-detail.component.css","webpack:///./src/app/crisis-center/crisis-detail/crisis-detail.component.ts","webpack:///./src/app/crisis-center/crisis-list/crisis-list.component.css","webpack:///./src/app/crisis-center/crisis-list/crisis-list.component.ts","webpack:///./src/app/crisis-center/crisis.service.ts","webpack:///./src/app/crisis-center/mock-crises.ts","webpack:///./src/app/dialog.service.ts"],"names":[],"mappings":"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","file":"crisis-center-crisis-center-module.js","sourcesContent":["module.exports = \"<p>Welcome to the Crisis Center</p>\\n\"","module.exports = \"<h2>CRISIS CENTER</h2>\\n<router-outlet></router-outlet>\\n\"","module.exports = \"<h2>CRISES</h2>\\n<!-- <div *ngIf=\\\"crisis$ | async as crisis\\\"> -->\\n<div *ngIf=\\\"crisis\\\">\\n  <h3>\\\"{{ editName }}\\\"</h3>\\n  <div><label>Id: </label>{{ crisis.id }}</div>\\n  <div>\\n    <label\\n      >name:\\n      <input [(ngModel)]=\\\"editName\\\" placeholder=\\\"name\\\" />\\n    </label>\\n  </div>\\n  <p>\\n    <button (click)=\\\"save()\\\">Save</button>\\n    <button (click)=\\\"cancel()\\\">Cancel</button>\\n  </p>\\n</div>\\n\"","module.exports = \"<h2>Crises</h2>\\n<ul class=\\\"crises\\\">\\n  <li\\n    *ngFor=\\\"let crisis of crises$ | async\\\"\\n    [class.selected]=\\\"crisis.id === selectedId\\\"\\n  >\\n    <!-- <a [routerLink]=\\\"['/crisis-center', crisis.id]\\\"> -->\\n    <!-- 我们在这里使用相对路径，这样的话父路由改变的时候就不会影响子路由，无/和./是一个意思同级路由下，兄弟路由使用../<sibling> -->\\n    <a [routerLink]=\\\"[crisis.id]\\\">\\n      <span class=\\\"badge\\\">{{ crisis.id }}</span> {{ crisis.name }}\\n    </a>\\n  </li>\\n</ul>\\n<!-- 提供路由出口，设置了children的话需要在父组件添加这个出口 -->\\n<router-outlet></router-outlet>\\n\"","import { Injectable } from \"@angular/core\";\nimport {\n  CanDeactivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from \"@angular/router\";\nimport { Observable } from \"rxjs\";\n// 专属的时候使用\n// import { CrisisDetailComponent } from \"./crisis-center/crisis-detail/crisis-detail.component\";\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable({\n  providedIn: \"root\",\n})\n// 作为专属组件的守卫的时候用\n// implements CanDeactivate<CrisisDetailComponent> {\nexport class CanDeactivateGuard\n  implements CanDeactivate<CanComponentDeactivate> {\n  canDeactivate(component: CanComponentDeactivate) {\n    // 调用其方法来判断是否继续离开即可，在组件中需要实现该方法，且为公开方法\n    return component.canDeactivate ? component.canDeactivate() : true;\n  }\n\n  // 下面的是如果为专属的路由守卫的话可以直接在这里实现canDeactivate，如果是各个组件不同的话要在各个组件中定义\n  // canDeactivate(\n  //   component: CrisisDetailComponent,\n  //   route: ActivatedRouteSnapshot,\n  //   state: RouterStateSnapshot\n  // ): Observable<boolean> | boolean {\n  //   console.log(route.paramMap.get(\"id\"));\n\n  //   console.log(state.url);\n  //   // 如果没有危机或者危机名字没有改变则放行\n  //   if (!component.crisis || component.crisis.name === component.editName) {\n  //     return true;\n  //   }\n\n  //   return component.dialogService.confirm(\"Discard changes?\");\n  // }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NyaXNpcy1jZW50ZXIvY3Jpc2lzLWNlbnRlci1ob21lL2NyaXNpcy1jZW50ZXItaG9tZS5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-crisis-center-home',\n  templateUrl: './crisis-center-home.component.html',\n  styleUrls: ['./crisis-center-home.component.css']\n})\nexport class CrisisCenterHomeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { CanDeactivateGuard } from \"../can-deactivate.guard\";\nimport { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { CrisisCenterHomeComponent } from \"./crisis-center-home/crisis-center-home.component\";\nimport { CrisisListComponent } from \"./crisis-list/crisis-list.component\";\nimport { CrisisCenterComponent } from \"./crisis-center/crisis-center.component\";\nimport { CrisisDetailComponent } from \"./crisis-detail/crisis-detail.component\";\n\nimport { CrisisDetailResolverService } from \"./crisis-detail-resolver.service\";\n\nconst crisisCenterRoutes: Routes = [\n  {\n    path: \"\",\n    component: CrisisCenterComponent,\n    children: [\n      {\n        path: \"\",\n        component: CrisisListComponent,\n        children: [\n          {\n            path: \":id\",\n            component: CrisisDetailComponent,\n            canDeactivate: [CanDeactivateGuard],\n            resolve: {\n              // 表示路由data中的属性值，用于路由获取路由守卫resolve拿到的数据\n              crisis: CrisisDetailResolverService\n            }\n          },\n          {\n            path: \"\",\n            component: CrisisCenterHomeComponent\n          }\n        ]\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(crisisCenterRoutes)],\n  exports: [RouterModule]\n})\nexport class CrisisCenterRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { CrisisCenterRoutingModule } from \"./crisis-center-routing.module\";\nimport { CrisisDetailComponent } from \"./crisis-detail/crisis-detail.component\";\nimport { CrisisListComponent } from \"./crisis-list/crisis-list.component\";\nimport { CrisisCenterComponent } from \"./crisis-center/crisis-center.component\";\nimport { CrisisCenterHomeComponent } from \"./crisis-center-home/crisis-center-home.component\";\n\n@NgModule({\n  declarations: [\n    CrisisDetailComponent,\n    CrisisListComponent,\n    CrisisCenterComponent,\n    CrisisCenterHomeComponent,\n  ],\n  imports: [CommonModule, CrisisCenterRoutingModule, FormsModule],\n})\nexport class CrisisCenterModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NyaXNpcy1jZW50ZXIvY3Jpc2lzLWNlbnRlci9jcmlzaXMtY2VudGVyLmNvbXBvbmVudC5jc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-crisis-center',\n  templateUrl: './crisis-center.component.html',\n  styleUrls: ['./crisis-center.component.css']\n})\nexport class CrisisCenterComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from \"@angular/core\";\nimport {\n  Router,\n  Resolve,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot,\n} from \"@angular/router\";\nimport { Observable, of, EMPTY } from \"rxjs\";\nimport { mergeMap, take } from \"rxjs/operators\";\n\nimport { CrisisService } from \"./crisis.service\";\nimport { Crisis } from \"./crisis\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class CrisisDetailResolverService implements Resolve<Crisis> {\n  constructor(private cs: CrisisService, private router: Router) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<Crisis> | Observable<never> {\n    let id = route.paramMap.get(\"id\");\n\n    return this.cs.getCrisis(id).pipe(\n      take(1),\n      mergeMap((crisis) => {\n        if (crisis) {\n          return of(crisis);\n        } else {\n          this.router.navigate([\"/crisis-center\"]);\n          return EMPTY;\n        }\n      })\n    );\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NyaXNpcy1jZW50ZXIvY3Jpc2lzLWRldGFpbC9jcmlzaXMtZGV0YWlsLmNvbXBvbmVudC5jc3MifQ== */\"","import { DialogService } from \"./../../dialog.service\";\nimport { Observable } from \"rxjs\";\nimport { CrisisService } from \"../crisis.service\";\nimport { Component, OnInit, Input } from \"@angular/core\";\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { switchMap } from \"rxjs/operators\";\nimport { Crisis } from \"../crisis\";\n\n@Component({\n  selector: \"app-crisis-detail\",\n  templateUrl: \"./crisis-detail.component.html\",\n  styleUrls: [\"./crisis-detail.component.css\"],\n})\nexport class CrisisDetailComponent implements OnInit {\n  // crisis: Observable<Crisis>;\n  crisis: Crisis;\n  editName: string;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private service: CrisisService,\n    // 因为要在can-deacivate守卫中调用\n    // public dialogService: DialogService\n    private dialogService: DialogService\n  ) {}\n\n  ngOnInit() {\n    // switchMap的好处是可以及时更新，在params变化的时候可以拿到最新的id值，始终保持最新\n    // this.crisis = this.route.paramMap.pipe(\n    //   // 这里是return这个而不只是在执行\n    //   switchMap((params: ParamMap) => this.service.getCrisis(params.get(\"id\")))\n    // );\n\n    // 如果确定这个实例永远都不会被复用的话那就可以使用快照来简化这段代码\n    // 注意这种方式只会得到初始值\n    // let id = this.route.snapshot.paramMap.get('id');\n    // this.crisis = this.service.getCrisis(id);\n    this.route.data.subscribe((data: { crisis: Crisis }) => {\n      this.editName = data.crisis.name;\n      this.crisis = data.crisis;\n    });\n  }\n\n  cancel() {\n    this.gotoCrises();\n  }\n\n  save() {\n    this.crisis.name = this.editName;\n    this.gotoCrises();\n  }\n\n  // 实现这个方法，用于控制什么离开该页面的条件\n  canDeactivate(): Observable<boolean> | boolean {\n    if (!this.crisis || this.crisis.name === this.editName) {\n      return true;\n    }\n\n    return this.dialogService.confirm(\"Discard changes?\");\n  }\n\n  gotoCrises() {\n    let crisisId = this.crisis ? this.crisis.id : null;\n    // 使用可选参数对象，包含了一个无用参数foo\n    // 使用相对路径来返回到上层路由\n    this.router.navigate([\"../\", { id: crisisId, foo: \"foo\" }], {\n      relativeTo: this.route,\n    });\n  }\n}\n","module.exports = \"/* HeroListComponent's private CSS styles */\\n.crises {\\n  margin: 0 0 2em 0;\\n  list-style-type: none;\\n  padding: 0;\\n  /* width: 15em; */\\n}\\n.crises li {\\n  position: relative;\\n  cursor: pointer;\\n  background-color: #eee;\\n  margin: 0.5em;\\n  padding: 0.3em 0;\\n  height: 1.6em;\\n  border-radius: 4px;\\n}\\n.crises li:hover {\\n  color: #607d8b;\\n  background-color: #ddd;\\n  left: 0.1em;\\n}\\n.crises a {\\n  color: #888;\\n  text-decoration: none;\\n  position: relative;\\n  display: block;\\n}\\n.crises a:hover {\\n  color: #607d8b;\\n}\\n.crises .badge {\\n  display: inline-block;\\n  font-size: small;\\n  color: white;\\n  padding: 0.8em 0.7em 0 0.7em;\\n  background-color: #607d8b;\\n  line-height: 1em;\\n  position: relative;\\n  left: -1px;\\n  top: -4px;\\n  height: 1.8em;\\n  min-width: 16px;\\n  text-align: right;\\n  margin-right: 0.8em;\\n  border-radius: 4px 0 0 4px;\\n}\\nbutton {\\n  background-color: #eee;\\n  border: none;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  cursor: hand;\\n  font-family: Arial;\\n}\\nbutton:hover {\\n  background-color: #cfd8dc;\\n}\\nbutton.delete {\\n  position: relative;\\n  left: 194px;\\n  top: -32px;\\n  background-color: gray !important;\\n  color: white;\\n}\\n.crises li.selected {\\n  background-color: #cfd8dc;\\n  color: white;\\n}\\n.crises li.selected:hover {\\n  background-color: #bbd8dc;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY3Jpc2lzLWNlbnRlci9jcmlzaXMtbGlzdC9jcmlzaXMtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQztBQUMzQztFQUNFLGlCQUFpQjtFQUNqQixxQkFBcUI7RUFDckIsVUFBVTtFQUNWLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2Isa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxjQUFjO0VBQ2Qsc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsV0FBVztFQUNYLHFCQUFxQjtFQUNyQixrQkFBa0I7RUFDbEIsY0FBYztBQUNoQjtBQUVBO0VBQ0UsY0FBYztBQUNoQjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osNEJBQTRCO0VBQzVCLHlCQUF5QjtFQUN6QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixTQUFTO0VBQ1QsYUFBYTtFQUNiLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLDBCQUEwQjtBQUM1QjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixZQUFZO0VBQ1osa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsVUFBVTtFQUNWLGlDQUFpQztFQUNqQyxZQUFZO0FBQ2Q7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0FBQ2Q7QUFDQTtFQUNFLHlCQUF5QjtBQUMzQiIsImZpbGUiOiJzcmMvYXBwL2NyaXNpcy1jZW50ZXIvY3Jpc2lzLWxpc3QvY3Jpc2lzLWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEhlcm9MaXN0Q29tcG9uZW50J3MgcHJpdmF0ZSBDU1Mgc3R5bGVzICovXG4uY3Jpc2VzIHtcbiAgbWFyZ2luOiAwIDAgMmVtIDA7XG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgcGFkZGluZzogMDtcbiAgLyogd2lkdGg6IDE1ZW07ICovXG59XG4uY3Jpc2VzIGxpIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gIG1hcmdpbjogMC41ZW07XG4gIHBhZGRpbmc6IDAuM2VtIDA7XG4gIGhlaWdodDogMS42ZW07XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLmNyaXNlcyBsaTpob3ZlciB7XG4gIGNvbG9yOiAjNjA3ZDhiO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkO1xuICBsZWZ0OiAwLjFlbTtcbn1cblxuLmNyaXNlcyBhIHtcbiAgY29sb3I6ICM4ODg7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBibG9jaztcbn1cblxuLmNyaXNlcyBhOmhvdmVyIHtcbiAgY29sb3I6ICM2MDdkOGI7XG59XG5cbi5jcmlzZXMgLmJhZGdlIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBmb250LXNpemU6IHNtYWxsO1xuICBjb2xvcjogd2hpdGU7XG4gIHBhZGRpbmc6IDAuOGVtIDAuN2VtIDAgMC43ZW07XG4gIGJhY2tncm91bmQtY29sb3I6ICM2MDdkOGI7XG4gIGxpbmUtaGVpZ2h0OiAxZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgbGVmdDogLTFweDtcbiAgdG9wOiAtNHB4O1xuICBoZWlnaHQ6IDEuOGVtO1xuICBtaW4td2lkdGg6IDE2cHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBtYXJnaW4tcmlnaHQ6IDAuOGVtO1xuICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDtcbn1cblxuYnV0dG9uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgYm9yZGVyOiBub25lO1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGN1cnNvcjogaGFuZDtcbiAgZm9udC1mYW1pbHk6IEFyaWFsO1xufVxuXG5idXR0b246aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2ZkOGRjO1xufVxuXG5idXR0b24uZGVsZXRlIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBsZWZ0OiAxOTRweDtcbiAgdG9wOiAtMzJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JheSAhaW1wb3J0YW50O1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5jcmlzZXMgbGkuc2VsZWN0ZWQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2ZkOGRjO1xuICBjb2xvcjogd2hpdGU7XG59XG4uY3Jpc2VzIGxpLnNlbGVjdGVkOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2JiZDhkYztcbn1cbiJdfQ== */\"","import { Component, OnInit } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\nimport { switchMap } from \"rxjs/operators\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\n\nimport { Crisis } from \"../crisis\";\nimport { CrisisService } from \"../crisis.service\";\nimport { MessageService } from \"../../message.service\";\n\n@Component({\n  selector: \"app-crisis-list\",\n  templateUrl: \"./crisis-list.component.html\",\n  styleUrls: [\"./crisis-list.component.css\"],\n})\nexport class CrisisListComponent implements OnInit {\n  selectedId: number;\n  crises$: Observable<Crisis[]>;\n\n  constructor(\n    private crisisService: CrisisService,\n    private messageService: MessageService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.crises$ = this.route.paramMap.pipe(\n      switchMap((params) => {\n        this.selectedId = +params.get(\"id\");\n        return this.crisisService.getCrises();\n      })\n    );\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { Observable, of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\n\nimport { Crisis } from \"./crisis\";\nimport { CRISES } from \"./mock-crises\";\nimport { MessageService } from \"../message.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class CrisisService {\n  constructor(private messageService: MessageService) {}\n\n  getCrises(): Observable<Crisis[]> {\n    // TODO: send the message _after_ fetching the Crisises\n    this.messageService.add(\"CrisisService: fetched Crisises\");\n    return of(CRISES);\n  }\n\n  getCrisis(id: number | string) {\n    return this.getCrises().pipe(\n      map((crises: Crisis[]) => crises.find((crisis) => crisis.id === +id))\n    );\n  }\n}\n","import { Crisis } from \"./crisis\";\n\nexport const CRISES: Crisis[] = [\n  { id: 1, name: \"Dragon Burning Cities\" },\n  { id: 2, name: \"Sky Rains Great White Sharks\" },\n  { id: 3, name: \"Giant Asteroid Heading For Earth\" },\n  { id: 4, name: \"Procrastinators Meeting Delayed Again\" },\n];\n","import { Injectable } from \"@angular/core\";\nimport { Observable, of } from \"rxjs\";\n\n/**\n * Async modal dialog service\n * DialogService makes this app easier to test by faking this service.\n * TODO: better modal implementation that doesn't use window.confirm\n */\n@Injectable({\n  providedIn: \"root\",\n})\nexport class DialogService {\n  /**\n   * Ask user to confirm an action. `message` explains the action and choices.\n   * Returns observable resolving to `true`=confirm or `false`=cancel\n   */\n  confirm(message?: string): Observable<boolean> {\n    const confirmation = window.confirm(message || \"Is it OK?\");\n\n    return of(confirmation);\n  }\n}\n"],"sourceRoot":""}